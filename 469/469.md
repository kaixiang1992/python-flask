### 469.【Flask视图高级】add_url_rule和app.route原理剖析[链接](http://wangkaixiang.cn/python-flask/di-wu-zhang-ff1a-shi-tu-gao-ji/di-yi-jie-ff1a-lei-shi-tu.html)

### 视图高级笔记：
* 1.`add_url_rule(rule,endpoint=None,view_func=None)`
> 这个方法用来添加url与视图函数的映射。如果没有填写`endpoint`，
那么默认会使用`view_func`的名字作为`endpoint`。以后在使用`url_for`的时候，
就要看在映射的时候有没有传递`endpoint`参数，如果传递了，
那么就应该使用`endpoint`指定的字符串，如果没有传递，那么就应该使用`view_func`的名字。

* 2.`app.route(rule,**options)`装饰器：
> 这个装饰器底层，其实也是使用`add_url_rule`来实现url与视图函数映射的。


### 示例代码
```python
from flask import Flask, url_for

app = Flask(__name__)

"""
app.route装饰器执行方式：
1.执行`app.route(rule, **options)`返回：decorator函数体

2.相当于执行：`decorator(hello_world)`，执行函数体中包含以下代码：
self.add_url_rule(rule, endpoint, f, **options)。实则调用方式如3

3.app.add_url_rule(rule, endpoint=None, view_func=None, **options)
"""


@app.route('/')
def hello_world():
    # TODO: 使用了`endpoint`
    print(url_for('list'))  # TODO: /list/
    # TODO: 未使用`endpoint`
    print(url_for('detail'))  # TODO: /detail/
    return 'Hello World!'


def my_list():
    return '我的列表'


def detail():
    return '我的详情'


app.add_url_rule('/list/', endpoint='list', view_func=my_list)
app.add_url_rule('/detail/', view_func=detail)

if __name__ == '__main__':
    app.run(debug=True)
```